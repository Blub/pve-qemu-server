2011-08-19  Proxmox Support Team  <support@proxmox.com>

	* qemu.init.d: create /var/run/qemu-server and
	/var/lock/qemu-server

2011-08-18  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (print_drive_full): enable aio by default.
	(parse_drive): support aio option for drives.
	(config_to_command): alway emit -vga option to kvm (else the vm
	wont boot)

2011-08-17  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (load_defaults): only read 'keyboard' from
	datacenter.cfg

2011-08-15  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (config_to_command): use -device instead of
	-usbdevice, try to assigng fixed port to tablet device
	(parse_usb_device): impl. new syntax for usb devices (-usb0,
	-usb1, ...)
	(parse_vm_config): fix parser for files without newline at eof

2011-08-12  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (config_to_command): include usb2
	configuration.

	* pve-usb.cfg: use extra file for usb2 configuration

	* PVE/QemuServer.pm (config_to_command): fix for 0.15.0 - supress
	network boot

2011-08-04  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (config_list): use PVE::Cluster::get_vmlist()
	to avoid fuse filesystem overhead.

2011-07-06  Proxmox Support Team  <support@proxmox.com>

	* PVE/API2/Qemu.pm (update_vm): check to avoid '-$opt' and
	'-delete $opt' at the same time.

	* PVE/API2/Qemu.pm (update_vm): track unused disks when someone
	overwrite disk settings

2011-06-29  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (config_to_command): implement -cpu option

2011-06-15  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (vmstatus): include IO stat

	* qm (status): impl. verbose option 

2011-03-09  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (vmstatus): report sizes in bytes, list disk
	size.
	(vmstatus): add network traffic

2011-03-04  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (config_to_command): require kvm 0.14.0 
	(config_to_command): use new "-device pci-assign,..." syntax

2011-03-02  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (parse_net): new 'rate' option.

	* pve-bridge: add traffic shaping

2011-02-25  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm: changed network config systax. We now use
	-net[n] instead of -vlan[n]. This allows us to add more options.

2011-02-11  Proxmox Support Team  <support@proxmox.com>

	* PVE/API2/Qemu.pm: renamed Config.pm to Qemu.pm (whole API inside
	one file now)

	* PVE/API2/Qemu/VNC.pm: moved code to Config.pm

	* PVE/API2/Qemu/Status.pm: moved code to Config.pm

	* PVE/API2/*: cleanup API Object hierarchiy

	* PVE/API2/Qemu.pm: remove (no longer needed)

2011-01-28  Proxmox Support Team  <support@proxmox.com>

	* qm (vncticket): removed - we don't need that anymore 

2010-10-13  Proxmox Support Team  <support@proxmox.com>

	* qmrestore: set bs=256k for 'dd' 

2010-10-12  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (parse_drive): add 'backup=[yes|no]' attribute.

	* qmrestore (restore_qemu): comment out disks with backup=no

	* PVE/VZDump/QemuServer.pm (prepare): skip disks with backup=no

2010-10-05  Seth Lauzon <seth.lauzon@gmail.com>

        * qmrestore (restore_qemu): new option --unique (create unique MAC
        address on restore)

2010-09-21  Proxmox Support Team  <support@proxmox.com>

	* PVE/QemuServer.pm (new): remove unused method
	(parse_options): remove unused method
	(vm_wait_old): remove unused method
	(vm_cdrom): remove unused method
	(vm_startall_old): remove unused method
	(load_diskinfo): rename to load_diskinfo_old (just in case someone
	still wants to use it)

	* PVE/VZDump/QemuServer.pm: use PVE::QemuServer::foreach_drive()

	* qmigrate: use PVE::QemuServer::foreach_drive()

	* PVE/QemuServer.pm (foreach_drive): new helper.

	* qmigrate (logmsg): remove PVE::QemuServer->new() call.

	* PVE/VZDump/QemuServer.pm (prepare): remove PVE::QemuServer->new() call.

2010-09-17  Proxmox Support Team  <support@proxmox.com>

	* PVE/API2/Qemu/Config.pm: impl. unlink/delete for disks.

	* PVE/QemuServer.pm (change_config_nolock): remove 'unusedX'
	settings if we re-use a previously unused volume.
	(add_unused_volume): helper to add 'unusedX' settings. Used to
	store references to volume IDs previously used by this VM.

2010-09-16  Proxmox Support Team  <support@proxmox.com>

	* nqm: renamed to qm

	* qm: renamed to qm.old.

	* PVE/QemuServer.pm (disknames): removed - no longer needed
	(parse_config): remove diskinfo
	(config_to_command): also return volume ID list
	(activate_volumes): removed

	* PVE/QemuServer.pm (parse_options_new): removed - no longer needed

2010-09-14  Proxmox Support Team  <support@proxmox.com>

	* PVE/API2/Qemu.pm: new index class

	* PVE/API2/Qemu/Status.pm: use better class name,
	impl. list cluster nodes

	* PVE/API2/Qemu/Config.pm: use better class name,
	impl. list cluster nodes

2010-09-13  Proxmox Support Team  <support@proxmox.com>

	* nqm: implement vncticket
	(run_vnc_proxy): impl. vncproxy

	* PVE/API2/QemuServer.pm: implement destroy_vm()

	* PVE/API2/QemuServerStatus.pm: implement vm_command()

	* nqm: implement monitor command

	* QemuServer.pm (vm_monitor_command): remove $self - not needed at all.

2010-09-10  Proxmox Support Team  <support@proxmox.com>

	* nqm: implement wait, showcmd and  startall

	* QemuServer.pm: register all options with
	PVE::JSONSchema::register_standard_option()

	* PVE/API2/QemuServer.pm: implement 'update_vm'

	* QemuServer.pm: use a JSON Schema to describe all options. We can
	now auto-generate the complete API doc.

	* QemuServer.pm (parse_options_new): first try

2010-09-08  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (check_type): register paramater formats with
	PVE::JSONSchema::register_format()
	(check_type): raise exceptions if something fail

2010-09-07  Proxmox Support Team  <support@proxmox.com>

	* nqm: temporary file to test new API - will replace 'qm' later.

	* QemuServer.pm (vmstatus): moved from PVE::Qemu.pm

2010-08-26  Proxmox Support Team  <support@proxmox.com>

	* PVE/*: created directory hierachy for library compoments

	* QemuServer.pm: use new libpve-common-perl

2010-08-20  Proxmox Support Team  <support@proxmox.com>

	* qmigrate (phase2): abort if migration status is 'failed'

2010-07-19  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (change_config_nolock): carefully catch write
	errors - avoid zero length config files when filesystem is full.
	(change_config_nolock): remove tmp file if rename fails

2010-06-29  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (parse_drive): add rerror/werror options (patch
	from l.mierzwa)

2010-06-25  Proxmox Support Team  <support@proxmox.com>

	* utils.c (full_read): always try to read full blocks (fix vmtar
	bug - endless growing archive)

	* vmtar.c (scan_sparse_file): use full_read()
	(dump_sparse_file): use full_read()

2010-04-28  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): correct order of config option (use sort).

2010-04-21  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: allow vlan1-to vlan4094 (Since 802.1q allows VLAN
	identifiers up to 4094).

2010-04-16  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (print_drive_full): only add file=$path if we have
	a path
	(config_to_command): do not create default devices (use -nodefaults
	option with newer qemu-kvm versions)

2009-12-11  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): only use fairsched when the
	kernel has openvz support

2009-10-28  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): use new -boot syntax, always
	enable boot menu (Press F12...)

2009-10-23  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (vm_stopall): corretly read timeout parameter

2009-10-16  Proxmox Support Team  <support@proxmox.com>

	* qm (create_disks): allow to use /dev/XXX directly.

	* QemuServer.pm (load_diskinfo): also disk size of devices	

	* QemuServer.pm (config_to_command): disable fairsched when the VM
	uses virtio devices.

2009-10-15  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): disable fairsched when
	cpuunits is zero
	(load_defaults): allow '_' in config file keys.

2009-10-06  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (vm_start): suppress syslog when setting migrate
	downtime/speed

2009-09-29  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: new migrate_speed and migrate_downtime settings

	* QemuServer.pm (vm_start): set migrate_speed and migrate_downtime

2009-09-18  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): support up to 1000 vlans

	* bridge-vlan: generic script - extract vlan from interface name
	(passe as parameter by kvm)

	* QemuServer.pm (config_to_command): use one generic bridge-vlan
	script

2009-09-15  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_file_lock): use /var/lock/qemu-server to
	store lock files.
	(config_to_command): introduce new 'sockets' and 'cores' settings
	- replaces 'smp' setting.
	(change_config_nolock): remove duplicates

2009-09-08  Proxmox Support Team  <support@proxmox.com>

	* VZDump::QemuServer.pm: vzdump plugin

	* sparsecp.c: used by qmrestore

	* vmtar.c: used by qmrestore

	* utils.c: helper functions (vmtar, sparsecp)

	* qmrestore: vzdump restore

	* QemuServer.pm (lock_file): use one file handle per process

	* qemu-server.pod: removed, because it contains no info
	
2009-09-07  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (destroy_vm): also remove unused disks

2009-09-03  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (*): correctly lock VM everywhere 

2009-08-18  Proxmox Support Team  <support@proxmox.com>

	* qmigrate: complete rewrite using kvm live migration 

2009-08-14  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (change_config_nolock): implemented new 'migrate'
	option - protect VM during migration. start/modify VM is disabled
	when this flag is set.

2009-08-12  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (load_diskinfo): do not include infos about unused
	disk images - this made problems with config file cache, because
	list of images can change while the config file itself is
	unchanged.

2009-07-21  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (get_qemu_drive_options): bug fix - return value.

2009-04-21  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: fixes for debian lenny

2009-02-26  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (split_args): allow white spaces inside args
	- use normal shell quoting

2009-02-11  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: added new 'args' option to pass arbitrary
	arguments to kvm.

2009-02-02  Proxmox Support Team  <support@proxmox.com>

	* qm: fix manual page 

	* QemuServer.pm (config_to_command): added 'startdate' option
	(config_to_command): added 'parallel' device pass through option

2009-01-23  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): new serial device pass
	through option

2009-01-12  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): use exec migration protocol
	instead of file

	* qmigrate (cleanup): update migration protocol syntax (use exec
	instead of file, because file is no longer supported)

2008-12-19  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (config_to_command): use predefined names for tap
	devices.

2008-11-17  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: added new hostusb option
	(__read_avail): fix duplicate data bug

2008-11-13  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (check_running): remove unreliable starttime check
	(check_cmdline): better test to check if pidfile belong to
	specific process

2008-11-11  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (check_running): return undef instead of using
	next (not inside a loop)

2008-11-04  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (parse_config): added 'description' option

2008-10-01  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: new time drift fix (tdf) option
	(vm_start): no timeout when restoring a vm

2008-09-26  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: new option 'vga' to select VGA type (Cirrus Logic
	GD5446 PCI or VESA2.0 compatible)

	* QemuServer.pm: new option kvm
	
2008-09-25  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (vm_monitor_command): set longer timeouts for
	migrate and cdrom commands

2008-08-22  Proxmox Support Team  <support@proxmox.com>

	* qm (create_disks): new 'wait' command - wait until VM is stopped

	* qemu-server: removed, mo more daemon needed
	
	* qm (print_usage): removed reboot option, because ist just a
	short for shutdown and start

2008-08-20  Proxmox Support Team  <support@proxmox.com>

	* qemu-server (server_stop): display more infos when stopping the
	server

2008-08-18  Proxmox Support Team  <support@proxmox.com>

	* qemu-server (vm_status): new status command

2008-07-07  Proxmox Support Team  <support@proxmox.com>

	* qmupdate (convert_0_9_1_to_0_9_2): new script to convert old
	configuration files

2008-06-27  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm: remove cdrom setting (use ide2 instead)
	(parse_options): add alias cdrom => ide2

2008-06-24  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (create_image): changed filesystem layout completely

2008-06-20  Proxmox Support Team  <support@proxmox.com> 

	* QemuServer.pm (lock_config): lock config files
	support virtio block devices

2008-06-18  Proxmox Support Team  <support@proxmox.com>

	* qemu-server (vm_start): read startup error messages correctly

	* QemuServer.pm (disknames): use 'ideX' and 'scsiX' instead of hdX
	and sdX, complete new syntax
	(default_img_file): changed image names
	(create_image): support multiple formats
	(destroy_vm): destroy all used images inside $imagedir

2008-06-11  Proxmox Support Team  <support@proxmox.com>

	* QemuServer.pm (create_conf): always create an unique mac
	address, use 'vlanX' instead of 'network', support up to 10
	bridges

2008-06-10  Proxmox Support Team  <support@proxmox.com>

	* qemu-server (read_proc_stat): fix cpu utilization (display
	absulute values)

2008-06-09  Proxmox Support Team  <support@proxmox.com>

	* qemu-server (qemu_monitor_write): monitor output now uses '\r\n'
	instead of '\n\n' (kvm69)

